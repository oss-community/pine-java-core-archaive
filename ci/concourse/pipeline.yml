groups:
  - name: development
    jobs:
      - development-build-pine-java-core
      - development-test-pine-java-core
  - name: uat
    jobs:
      - uat-build-pine-java-core
      - uat-test-pine-java-core

resources:
  - name: repo-pine-java-core
    type: git
    icon: github
    source:
      uri: https://github.com/saman-oss/pine-java-core.git
      branch: main

jobs:
  - name: development-test-pine-java-core
    plan:
      - get: repo-pine-java-core
        passed: [ development-build-pine-java-core ]
        trigger: true
      - task: test
        input_mapping:
          repo: repo-pine-java-core
        privileged: true
        file: repo-pine-java-core/ci/concourse/unit-test.yaml
  - name: development-build-pine-java-core
    plan:
      - get: repo-pine-java-core
        trigger: true
      - task: build
        input_mapping:
          repo: repo-pine-java-core
        privileged: true
        file: repo-pine-java-core/ci/concourse/build.yaml
  - name: uat-test-pine-java-core
    plan:
      - get: repo-pine-java-core
        passed: [ uat-build-pine-java-core ]
      - task: test
        input_mapping:
          repo: repo-pine-java-core
        privileged: true
        file: repo-pine-java-core/ci/concourse/unit-test.yaml
  - name: uat-build-pine-java-core
    plan:
      - get: repo-pine-java-core
      - task: build
        input_mapping:
          repo: repo-pine-java-core
        privileged: true
        file: repo-pine-java-core/ci/concourse/build.yaml
